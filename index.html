<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eligibility Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Login Form -->
    <div id="loginContainer" class="login-container">
        <h2>Login</h2>
        <form id="loginForm">
            <p>
                <label for="username">Username:</label>
                <input type="text" id="username" required>
            </p>
            <p>
                <label for="password">Password:</label>
                <input type="password" id="password" required>
            </p>
            <p>
                <button type="button" onclick="validateLogin()">Login</button>
            </p>
            <p id="loginError" class="error-message"></p>
        </form>
    </div>

    <!-- Main Calculator Container (Initially Hidden) -->
    <div id="calculatorContainer" class="calculator-container" style="display: none;">
        <h1>Eligibility Calculator</h1>
        <p class="note"><b>Note: <br>1. Please select 'New Customer' or 'Existing Customer' as the case may be, before entering any other input</br> 2. All inputs must be in the same unit. Example: all in INR lakh, all in INR, etc.</b></p>

        <form id="calcForm">
            <!-- Customer Type Selection -->
            <p>
                <label for="customerType">Select Customer Type:</label>
                <select id="customerType" onchange="toggleOldCustomerFields()">
                    <option value="new">New Customer</option>
                    <option value="old">Existing Customer</option>
                </select>
            </p>

            <!-- Inputs for New Customers -->
            <p id="newCustomerFields">
                <label for="totalPurchases">Total Purchases (last 12 months):</label>
                <input type="number" id="totalPurchases" required>
                <br>
                <i><span style="font-size: smaller;">Total raw materials purchased in last 12 months</span></i>
            </p>

            <!-- Inputs for Old Customers -->
            <div id="oldCustomerFields" style="display: none;">
                <p>
                    <label for="projectedPurchases">Projected Purchase with TBH (for next 12 months):</label>
                    <input type="number" id="projectedPurchases" required>
                    <br>
                    <i><span style="font-size: smaller;">Total estimated raw materials that will be purchased from TBH in the next 12 months</span></i>
                </p>
		<p>
                    <label for="lastTotalPurchases">Last 12 months total purchases:</label>
                    <input type="number" id="lastTotalPurchases">
                    <br>
                    <i><span style="font-size: smaller;">Total Raw materials purchased in the last 12 months</span></i>
                </p>
                <p>
                    <label for="lastTbhPurchases">Last 12 months purchases with TBH:</label>
                    <input type="number" id="lastTbhPurchases">
                    <br>
                    <i><span style="font-size: smaller;">Raw materials purchased with TBH in the last 12 months</span></i>
                </p>
            </div>

            <!-- Common Inputs -->
            <p>
                <label for="ccLimit">Total OD and CC Limit:</label>
                <input type="number" id="ccLimit" required>
                <br>
                <i><span style="font-size: smaller;">Overdraft facility, existing limit from NBFC or bank, etc.</span></i>
            </p>
            <p>
                <label for="creditTrancheDays">Required Credit Days (30, 45, 60, 75, 90):</label>
                <input type="number" id="creditTrancheDays" required>
            </p>

            <p>
                <button type="button" onclick="calculateExpectedLimit()">Calculate Eligible Limit</button>
            </p>
        </form>

        <div class="result">
            <h2>Eligible Limit: <span id="finalLimitOutput">0.00</span></h2>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>